<!DOCTYPE html> <!-- File managed by WebFX (DO NOT EDIT MANUALLY) -->
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, viewport-fit=cover"/>
        <meta name="mavenBuildTimestamp" content="${maven.build.timestamp}"/>
        <link rel="stylesheet" href="./dev/webfx/kit/css/main.css?v=${maven.build.timestamp}"></link>

    </head>
    <body>
        <script>
            async function unregisterPwaServiceWorker() {
                if (navigator.serviceWorker) {
                    navigator.serviceWorker.getRegistrations()
                        .then(registrations => {
                            registrations.forEach((registration, i) => registration.unregister());
                            return null;
                        });
                    const cache = await caches.open("webfx-pwa-cache")
                    const keys = await cache.keys();
                    await Promise.all(keys.map(async (req) => {
                        await cache.delete(req);
                    }));
                }
            }
            unregisterPwaServiceWorker();
        </script>
        <script type="text/javascript" charset="utf-8" src="./classes.wasm-runtime.js"></script>
        <script>
            async function main() {
                // Manual polyfill for wasm:js-string (needed for browsers like Safari that don't support it yet)
                const importObject = {
                    "wasm:js-string": {
                        "fromCharCode": String.fromCharCode,
                        "fromCodePoint": String.fromCodePoint,
                        "charCodeAt": (s, i) => s.charCodeAt(i),
                        "codePointAt": (s, i) => s.codePointAt(i),
                        "length": (s) => s.length,
                        "concat": (s1, s2) => s1 + s2,
                        "substring": (s, a, b) => s.substring(a, b),
                        "equals": (s1, s2) => s1 === s2,
                        "compare": (s1, s2) => s1 < s2 ? -1 : (s1 > s2 ? 1 : 0),
                        "fromCharCodeArray": (a, start, end) => {
                            let s = "";
                            for (let i = start; i < end; ++i) s += String.fromCharCode(a[i]);
                            return s;
                        },
                        "intoCharCodeArray": (s, a, start) => {
                            for (let i = 0; i < s.length; ++i) a[start + i] = s.charCodeAt(i);
                        }
                    }
                };
                // Force TeaVM to use the modern string built-in path
                if (typeof WebAssembly.validate !== "undefined") {
                    const oldValidate = WebAssembly.validate;
                    WebAssembly.validate = function(bytes, options) {
                        return (options && options.builtins && options.builtins.includes("js-string")) || oldValidate(bytes, options);
                    };
                }
                // Handle browsers that throw on 'builtins' option in instantiate (like Safari)
                if (typeof WebAssembly.instantiate !== "undefined") {
                    const oldInstantiate = WebAssembly.instantiate;
                    WebAssembly.instantiate = function(bytes, importObject, options) {
                        if (options && options.builtins && options.builtins.includes("js-string")) {
                            try {
                                return oldInstantiate(bytes, importObject, options);
                            } catch (e) {
                                return oldInstantiate(bytes, importObject);
                            }
                        }
                        return oldInstantiate(bytes, importObject, options);
                    };
                }
                const teavm = await TeaVM.wasmGC.load("classes.wasm", {
                    installImports: (imports) => {
                        Object.assign(imports, importObject);
                    },
                    stackDeobfuscator: {
                        enabled: false // Can be set to true during development to get clear stack traces
                    }
                });
                teavm.exports.main([]);
            }
            main();
        </script>

    </body>
</html>